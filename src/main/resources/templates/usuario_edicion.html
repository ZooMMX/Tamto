<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" layout:decorator="layout">
<head>
    <title>Edición de usuario</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
    <th:block layout:fragment="titulo">
        Título <small>subtítulo</small>
    </th:block>
    <th:block layout:fragment="breadcrumb">
        <li>
            <a href="/usuarios">Usuarios</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a th:href="'/usuarioEdicion/'+${username}" th:text="'Edición de usuario'"></a>
        </li>
    </th:block>
    <div layout:fragment="content">
        <!-- Begin content -->
        <div class="alert alert-success alert-dismissable" th:if="${successfulChange}">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
            <strong>Confirmación!</strong> Usuario modificado.
        </div>
        <div class="alert alert-success alert-dismissable" th:if="${successfulRegister}">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
            <strong>Confirmación!</strong> Usuario registrado.
        </div>
        <!-- BEGIN FORM-->
        <form id="formi" th:action="@{/usuarioEdicion/__${user.getUsername()}__}" th:object="${user}" class="horizontal-form"  method="POST" enctype="multipart/form-data">
            <div class="portlet box purple">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-gift"></i>
                    <span class="caption-subject bold uppercase">Editar usuario</span>
                </div>
                <div class="actions">
                    <input th:field="*{enabled}" type="checkbox" class="make-switch" checked="checked" data-on-color="default" data-off-color="danger" data-on-text="&nbsp;Activo&nbsp;&nbsp;" data-off-text="&nbsp;Inactivo&nbsp;"/>
                </div>
            </div>
                <div class="portlet-body form">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Nombre completo</label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" id="fullname" th:field="*{fullname}" class="form-control" placeholder="Nombre completo del usuario"/>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Nombre de usuario</label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <input type="text" id="username" th:field="*{username}" class="form-control" placeholder="Nombre sin espacios de al menos 8 letras" readonly="readonly"/>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <!--/row-->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Roles</label>
                                    <div class="input-icon right">
                                        <i class="fa"></i>
                                        <select id="roles" class="form-control select2 select2-offscreen" name="roles" multiple="multiple">
                                            <option th:each="type : ${roleTypes}" th:value="${type}" th:text="${type}" th:selected="${userRoles.contains(type.toString())}">X</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Contraseña</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="fa fa-lock fa-fw"></i>
                                        </span>
                                        <div class="input-icon right">
                                            <i class="fa"></i>
                                            <input id="password" class="form-control" th:field="*{password}" type="password" name="password" placeholder="Dejar vacío para no modificar"/>
                                        </div>
                                    </div>
                                    <br/>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="fa fa-lock fa-fw"></i>
                                        </span>
                                        <div class="input-icon right">
                                            <i class="fa"></i>
                                            <input id="password_confirm" class="form-control" type="password" name="password_confirm" placeholder="Confirmación"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--/span-->
                        </div>
                        <!--/row-->
                    </div>
                    <div class="form-actions right">
                        <a class="btn default" href="/usuarios">Cancelar</a>
                        <button type="submit" class="btn blue"><i class="fa fa-check"></i>Guardar cambios</button>
                    </div>
                    <!--/row-->
                </div>
            </div>
        </form>
        <!-- END FORM-->
    </div>
    <!-- END content -->
    <th:block layout:fragment="scripts">

        <!-- BEGIN PAGE LEVEL STYLES -->
        <link href="/plugins/select2/select2.css" rel="stylesheet" type="text/css"/>
        <!-- END PAGE LEVEL STYLES -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="/plugins/fancybox/source/jquery.fancybox.pack.js"></script>
        <script src="/scripts/form-user-edicion.js"></script>
        <script type="text/javascript" src="/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js"></script>
        <script type="text/javascript" src="/plugins/jquery-validation/js/jquery.validate.min.js"></script>
        <script type="text/javascript" src="/plugins/jquery-validation/js/additional-methods.min.js"></script>
        <script type="text/javascript" src="/plugins/select2/select2.min.js"></script>
        <!-- END PAGE LEVEL PLUGINS-->

        <script>
                jQuery(document).ready(function() {
                    $("#roles").select2();
                    FormUserScripts.init();
                });
        </script>
    </th:block>
</body>
</html>